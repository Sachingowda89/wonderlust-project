<% layout('layouts/boilerplate') %>
<!-- flash msg send -->
<% if (success && success.length > 0) { %>
  <div class="alert alert-success"><%= success %></div>
<% } %>
<% if (error && error.length > 0) { %>
  <div class="alert alert-danger"><%= error %></div>
<% } %>


    <!-- <h1>All listing</h1> -->
    <!-- click it ot open the creating page  -->
 <!-- add styles for UI filter -->
    <style>
        #filters{
          display: flex;
          flex-wrap: wrap;
        }
        .filter{
          text-align: center;
          margin-right: 2rem;
          opacity: 0.7;
        }
        .filter:hover{
          opacity: 1;
          cursor: pointer;
        }
        .filter p{
          font-size: 0.8rem;
        }
        .tax-info{
          display: none;
        }
        .tax-toggle{
          border: 1px solid black;
          border-radius: 1rem;
          height: 3rem;
          padding: 1rem;
          margin-left: 5rem;
          display: flex;
          align-items: center;
        }
    </style>

    <!-- add UI for filters -->
     <div id="filters">
      <div class="filter">
        <div><i class="fa-solid fa-fire"></i></div>  
       <p> Trending </p>  
      </div>
        <div class="filter">
        <div><i class="fa-solid fa-bed"></i></div>  
       <p> Rooms </p>  
      </div>
         <div class="filter">
        <div> <i class="fa-solid fa-mountain-city"></i> </div>
       <p> Iconic cities </p>  
      </div>
       <div class="filter">
        <div> <i class="fa-solid fa-mountain"></i> </div>
       <p>Mountains </p>  
      </div>
       <div class="filter">
        <div><i class="fa-brands fa-fort-awesome"></i></div>
       <p> Castles </p>  
      </div>
         <div class="filter">
        <div><i class="fa-solid fa-person-swimming"></i></div>
       <p> Amazing Pools</p>  
      </div>
      <div class="filter">
        <div> <i class="fa-solid fa-campground"></i> </div>
        <p>Camping </p>  
      </div>
       <div class="filter">
        <div><i class="fa-solid fa-cow"></i></div>
       <p> Forms </p>  
      </div>
         <div class="filter">
        <div><i class="fa-solid fa-snowflake"></i></div>
       <p> Arctic</p>  
      </div>
      <div class="filter">
        <div><i class="fa-solid fa-igloo"></i></div>
       <p> Domes </p>  
      </div>
         <div class="filter">
        <div><i class="fa-solid fa-sailboat"></i></div>
       <p> Boats</p>  
      </div>
      <div class="filter">
        <div><i class="fa-solid fa-cloud"></i></div>
       <p>Cloud</p>  
      </div>

 <div class="tax-toggle">
   <div class="form-check-reverse form-switch">
  <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
  <label class="form-check-label" for="flexSwitchCheckDefault">Display total after taxes</label>
</div>
 </div>
    
     </div>
     <!-- <form method="GET" action="/listings/new">
      <button>Create New Listing</button>
    </form> -->
<div class="container mt-3" >
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-lg-3 g-4">
    <% for (let listing of allListings) { %>
      <div class="col">
        <a href="/listings/<%= listing._id %>" class="text-decoration-none text-dark">
          <div class="card h-100 shadow-sm w-100">
            <div class="card-img-container">
              <img 
                src="<%= listing.image.url %>" 
                class="card-img-top zoom-img" 
                alt="listing image"
                style="height: 200px; object-fit: cover;"
              >
            </div>
            <div class="card-body d-flex flex-column flex-grow-1">
              <h5 class="card-title"><%= listing.title %></h5>
              <p class="card-text"><%= listing.description %></p>
              <p class="card-text"><strong>Price:</strong> â‚¹<%= listing.price %> /night
              <i class="tax-info">&nbsp; &nbsp;+18% GST</i> </p> 
              <p class="card-text"><strong>Location:</strong> <%= listing.location %>, <%= listing.country %></p>
              <button class="btn btn-primary mt-auto">View Details</button>
            </div>
          </div>
        </a>
      </div>
    <% } %>
  </div>
</div>

<script>
  let taxSwitch=document.getElementById("flexSwitchCheckDefault");
  taxSwitch.addEventListener("click",()=>{
    let taxInfo=document.getElementsByClassName("tax-info");
    console.log(taxInfo);
    for(info of taxInfo){
      if(info.style.display!="inline"){
         info.style.display="inline";
      }else{
        info.style.display="none";
      }
    }

  });
</script>


<!-- only titles -->

    <!-- <ul>
       <% for(let listing of allListings){  %>
            <li><a href="/listings/<%= listing._id %>"> <%= listing.title%></a></li>
             
     <%   }  %>
    </ul>
 -->
